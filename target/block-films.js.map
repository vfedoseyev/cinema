{"version":3,"sources":["../js/block-films.js"],"names":["blockFilmsWrapper","document","getElementById","innerHTML","kinopoiskapiunofficialRequest","url","fetch","headers","cors","topFilmRequest","filmDeatilsRequest","id","fetchBlockFilms","result","json","data","films","forEach","film","filmId","wrapper","createElement","classList","add","imgWrapper","img","src","posterUrlPreview","alt","append","shadow","descWrapper","title","textContent","nameRu","desc","detailResult","deatilsData","description","remove"],"mappings":"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","sourcesContent":["const blockFilmsWrapper = document.getElementById('block05-films-wrapper');\r\nblockFilmsWrapper.innerHTML = '';\r\n\r\n\r\nconst kinopoiskapiunofficialRequest = (url) => {\r\n    return fetch(url, {\r\n        headers: {\r\n            'accept': 'application/json',\r\n            'X-API-KEY': '88461c41-2f0c-44d9-9484-4604e4779f76'\r\n        },\r\n        cors: 'no-cors'\r\n    });\r\n}\r\n\r\nconst topFilmRequest = () => {\r\n    return kinopoiskapiunofficialRequest('https://kinopoiskapiunofficial.tech/api/v2.2/films/top?type=TOP_AWAIT_FILMS&page=1')\r\n}\r\nconst filmDeatilsRequest = (id) => {\r\n    return kinopoiskapiunofficialRequest(`https://kinopoiskapiunofficial.tech/api/v2.1/films/${id}`)\r\n}\r\n\r\nconst fetchBlockFilms = async () => {\r\n    const result = await topFilmRequest();\r\n    const data = await result.json();\r\n\r\n    data.films.forEach(async (film) => {\r\n        const id = `blocks-films-desc-${film.filmId}`;\r\n        const wrapper = document.createElement('div');\r\n        wrapper.classList.add('film__card')\r\n        const imgWrapper = document.createElement('div');\r\n        imgWrapper.classList.add('film__img')\r\n        const img = document.createElement('img');\r\n        img.src = film.posterUrlPreview;\r\n        img.alt = 'Постер к фильму';\r\n\r\n        imgWrapper.append(img);\r\n\r\n        const shadow = document.createElement('div');\r\n        shadow.classList.add('block05__shadow')\r\n\r\n        const descWrapper = document.createElement('div')\r\n        descWrapper.classList.add('films__block')\r\n\r\n        const title = document.createElement('h4')\r\n        title.textContent = film.nameRu;\r\n\r\n        const desc = document.createElement('p')\r\n        desc.textContent = '...loading'\r\n\r\n\r\n        descWrapper.append(title, desc);\r\n        wrapper.append(imgWrapper, shadow, descWrapper,);\r\n        blockFilmsWrapper.append(wrapper);\r\n\r\n        const detailResult = await filmDeatilsRequest(film.filmId);\r\n        const deatilsData = await detailResult.json();\r\n\r\n        const description = deatilsData.data.description;\r\n        desc.textContent = description;\r\n        if (!description) {\r\n            wrapper.remove();\r\n        }\r\n\r\n\r\n\r\n        //     blockFilmsWrapper.innerHTML += `\r\n        //     <div class=\"film__card\" id=\"\">\r\n        //         <img class=\"film__img\" src=\"${film.posterUrlPreview}\">\r\n        //         <div class=\"films__block\">\r\n        //             <h4>${film.nameRu}</h4>\r\n        //             <p id =\"${id}\">...loading\r\n        //             </p>\r\n        //         </div>\r\n        //     </div>\r\n        // `\r\n    })\r\n}\r\nfetchBlockFilms();\r\n\r\n    // fetch('https://kinopoiskapiunofficial.tech/api/v2.2/films/top?type=TOP_AWAIT_FILMS&page=1', {\r\n    //     headers: {\r\n    //         ...apiHeaders\r\n    //     },\r\n    //     cors: 'no-cors'\r\n    // })\r\n    //     .then(data => data.json())\r\n    //     .then(data => {\r\n    //         data.films.forEach((film) => {\r\n    //             const id = `blocks-films-desc-${film.filmId}`\r\n    //             blockFilmsWrapper.innerHTML += `\r\n    //         <div class=\"film__card\" id=\"\">\r\n    //             <img src=\"${film.posterUrlPreview}\">\r\n    //             <div class=\"films__block\">\r\n    //                 <h4>${film.nameRu}</h4>\r\n    //                 <p id =\"${id}\">...loading\r\n    //                 </p>\r\n    //             </div>\r\n    //         </div>\r\n    //     `\r\n\r\n    //             fetch(`https://kinopoiskapiunofficial.tech/api/v2.1/films/${film.filmId}`, {\r\n    //                 headers: {\r\n    //                     ...apiHeaders\r\n    //                 },\r\n    //                 cors: 'no-cors'\r\n    //             })\r\n    //                 .then(data => data.json())\r\n    //                 .then(({ data: { description } }) => {\r\n    //                     const desc = document.getElementById(id);\r\n    //                     desc.innerText = description;\r\n    //                     if (!description) {\r\n    //                         const root = desc.parentNode.parentNode;\r\n    //                         blockFilmsWrapper.removeChild(root);\r\n    //                     }\r\n    //                 })\r\n    //         })\r\n    //     })"],"file":"block-films.js"}